<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Caveat:wght@400..700&family=Jost:ital,wght@0,100..900;1,100..900&family=Macondo&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Press+Start+2P&family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="tailwind.css" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="bg-white w-full min-h-screen relative font-poppins">
    <aside
      class="aside size-full items-center flex-col bg-blue-500/50 backdrop-blur-sm absolute top-0 z-10 overflow-hidden hidden"
    >
      <h1
        class="text-4xl font-extrabold text-white tracking-wide antialiased mt-2"
      >
        AdminDB
      </h1>
      <ul class="mt-8 w-full h-full flex items-center flex-col gap-y-3">
        <li
          class="flex items-center justify-center bg-white w-40 p-1 h-auto text-center rounded"
        >
          <a href="#" class="text-sm font-bold text-blue-500">INPUT BARANG</a>
        </li>
        <li
          class="flex items-center justify-center bg-white w-40 p-1 h-auto text-center rounded"
        >
          <a href="#" class="text-sm font-bold text-blue-500">STOK BARANG</a>
        </li>
        <li
          class="flex items-center justify-center bg-white w-40 p-1 h-auto text-center rounded"
        >
          <a href="#" class="text-sm font-bold text-blue-500">DAFTAR USER</a>
        </li>
      </ul>
    </aside>

    <nav class="w-full h-20 bg-blue-500 flex items-center justify-between z-0">
      <h2
        class="text-lg font-extrabold text-white tracking-wide antialiased sticky ml-3"
      >
        AdminDB
      </h2>
      <div
        class="wrapper size-fit flex flex-row items-center justify-center mr-3 gap-x-[10px]"
      >
        <div class="wrap-bell w-fit h-fit relative">
          <div
            class="bulat w-3 h-3 rounded-full absolute top-0 right-0 bg-red-600 text-white"
          ></div>
          <img src="src/image/bell.png" alt="notification" />
        </div>
        <input
          type="search"
          name="searchbar"
          id="searchbar"
          class="w-20 text-sm font-poppins rounded-sm"
        />
        <div
          class="burger-nav w-5 h-[13px] relative flex items-center justify-center cursor-pointer z-10"
        >
          <div
            class="line1 burger-nav w-1/2 right-0 h-[3px] bg-white absolute top-0 rounded-sm burger-nav-hover"
          ></div>
          <div
            class="line2 burger-nav w-full h-[3px] bg-white absolute rounded-sm"
          ></div>
          <div
            class="line3 burger-nav w-1/2 left-0 h-[3px] bottom-0 bg-white absolute rounded-sm"
          ></div>
        </div>
      </div>
    </nav>

    <main class="w-full h-full flex items-center flex-col">
      <section
        class="mt-6 sold-chart w-full h-auto flex justify-center flex-col relative gap-y-2 md:items-center md:w-[70%] md:h-[50%]"
      >
        <h2 class="text-2xl font-bold text-blue-500 text-center">
          CHART PENJUALAN
        </h2>
        <div class="flex w-full h-auto justify-end">
          <select class="cursor-pointer w-24" id="bulanSelect">
            <option class="cursor-pointer" value="0">Januari</option>
            <option class="cursor-pointer" value="1">Februari</option>
            <option class="cursor-pointer" value="2">Maret</option>
            <option class="cursor-pointer" value="3">April</option>
            <option class="cursor-pointer" value="4">Mei</option>
            <option class="cursor-pointer" value="5">Juni</option>
            <option class="cursor-pointer" value="6">July</option>
            <option class="cursor-pointer" value="7">Agustus</option>
            <option class="cursor-pointer" value="8">September</option>
            <option class="cursor-pointer" value="9">Oktober</option>
            <option class="cursor-pointer" value="10">November</option>
            <option class="cursor-pointer" value="11">Desember</option>
          </select>
        </div>
        <canvas
          class="w-full h-full md:w-[80%] md:h-[60%]"
          id="salesChart"
        ></canvas>
      </section>

      <section
        class="mt-6 sold-chart w-full h-auto flex justify-center flex-col gap-y-2 md:items-center md:w-[70%] md:h-[50%]"
      >
        <h2 class="text-2xl font-bold text-blue-500 text-center">
          USER GROWTH
        </h2>
        <canvas class="size-full" id="userGrowthChart"></canvas>
      </section>

      <!-- 1. Mini Summary Cards -->
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
        <div class="bg-blue-500 text-white rounded-xl p-4 shadow">
          <h3 class="text-sm font-semibold">Total Barang</h3>
          <p class="text-2xl font-bold">128</p>
        </div>
        <div class="bg-green-500 text-white rounded-xl p-4 shadow">
          <h3 class="text-sm font-semibold">Stok Menipis</h3>
          <p class="text-2xl font-bold">7</p>
        </div>
        <div class="bg-yellow-400 text-gray-800 rounded-xl p-4 shadow">
          <h3 class="text-sm font-semibold">User Aktif</h3>
          <p class="text-2xl font-bold">42</p>
        </div>
        <div class="bg-indigo-500 text-white rounded-xl p-4 shadow">
          <h3 class="text-sm font-semibold">Penjualan Hari Ini</h3>
          <p class="text-2xl font-bold">2.7 jt</p>
        </div>
      </div>

      <!-- 2. Recent Activity Feed -->
      <div class="bg-white rounded-xl shadow p-4 mb-6">
        <h3 class="text-lg font-semibold mb-3">Aktivitas Terbaru</h3>
        <ul class="space-y-2 text-sm text-gray-700">
          <li class="border-b pb-2">
            üì¶ Rina menambahkan ‚ÄúKopi Arabica 250 g‚Äù
          </li>
          <li class="border-b pb-2">üõí Budi checkout 3 item (Rp 185.000)</li>
          <li>‚ö†Ô∏è Stok ‚ÄúGula Pasir 1 kg‚Äù berkurang 20 pcs</li>
        </ul>
      </div>

      <!-- 3. Quick Actions -->
      <div class="flex flex-wrap justify-center gap-3 mb-6">
        <button
          class="px-4 py-2 border border-blue-500 text-blue-500 rounded-lg hover:bg-blue-500 hover:text-white transition"
        >
          ‚ûï Tambah Barang
        </button>
        <button
          class="px-4 py-2 border border-green-500 text-green-500 rounded-lg hover:bg-green-500 hover:text-white transition"
        >
          üì¶ Restok Cepat
        </button>
        <button
          class="px-4 py-2 border border-indigo-500 text-indigo-500 rounded-lg hover:bg-indigo-500 hover:text-white transition"
        >
          üìÑ Laporan PDF
        </button>
      </div>
    </main>

    <!-- 4. Footer -->
    <footer class="text-center text-sm text-gray-500 mt-8 py-4 border-t">
      &copy; 2025 AdminDB ‚Äî Built with ‚ù§Ô∏è and Chart.js
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
    <script>
      // Data dummy per bulan (tanggal 1-30)
      const dataPerBulan = {
        0: Array.from({ length: 31 }, (_, i) =>
          Math.floor(Math.random() * 100)
        ), // Januari
        1: Array.from({ length: 28 }, (_, i) =>
          Math.floor(Math.random() * 100)
        ), // Februari
        2: Array.from({ length: 31 }, (_, i) =>
          Math.floor(Math.random() * 100)
        ), // Maret
        3: Array.from({ length: 30 }, (_, i) =>
          Math.floor(Math.random() * 100)
        ), // April
        4: Array.from({ length: 31 }, (_, i) =>
          Math.floor(Math.random() * 100)
        ), // Mei
        4: Array.from({ length: 31 }, (_, i) =>
          Math.floor(Math.random() * 100)
        ), // Juni
        5: Array.from({ length: 31 }, (_, i) =>
          Math.floor(Math.random() * 100)
        ), // July
        6: Array.from({ length: 31 }, (_, i) =>
          Math.floor(Math.random() * 100)
        ), // Agustus
        7: Array.from({ length: 31 }, (_, i) =>
          Math.floor(Math.random() * 100)
        ), // September
        8: Array.from({ length: 31 }, (_, i) =>
          Math.floor(Math.random() * 100)
        ), // Oktober
        9: Array.from({ length: 31 }, (_, i) =>
          Math.floor(Math.random() * 100)
        ), // November
        10: Array.from({ length: 31 }, (_, i) =>
          Math.floor(Math.random() * 100)
        ), // Desember
        11: Array.from({ length: 31 }, (_, i) =>
          Math.floor(Math.random() * 100)
        ),
      };

      const ctx = document.getElementById("salesChart").getContext("2d");
      let chart;

      function renderChart(bulanIndex) {
        const data = dataPerBulan[bulanIndex];
        const labels = Array.from(
          { length: data.length },
          (_, i) => `Tgl ${i + 1}`
        );

        if (chart) chart.destroy(); // Hapus chart lama

        chart = new Chart(ctx, {
          type: "line",
          data: {
            labels: labels,
            datasets: [
              {
                label: `Data Bulan ${
                  [
                    "Januari",
                    "Februari",
                    "Maret",
                    "April",
                    "Mei",
                    "Juni",
                    "July",
                    "Agustus",
                    "September",
                    "Oktober",
                    "November",
                    "Desember",
                  ][bulanIndex]
                }`,
                data: data,
                fill: false,
                borderColor: "blue",
                tension: 0.1,
              },
            ],
          },
          options: {
            plugins: {
              legend: {
                display: false,
              },
            },
            responsive: true,
            scales: {
              y: { beginAtZero: true },
            },
          },
        });
      }

      // Event listener dropdown
      document
        .getElementById("bulanSelect")
        .addEventListener("change", function () {
          const bulanIndex = parseInt(this.value);
          renderChart(bulanIndex);
        });

      // Render pertama kali (default Januari)
      renderChart(0);

      // Nama bulan
      const months = [
        "Jan",
        "Feb",
        "Mar",
        "Apr",
        "Mei",
        "Jun",
        "Jul",
        "Ags",
        "Sep",
        "Okt",
        "Nov",
        "Des",
      ];

      // Data dummy jumlah user baru tiap bulan
      const userGrowthData = [5, 12, 8, 15, 20, 25, 30, 28, 35, 40, 50, 60];

      const ctxuser = document
        .getElementById("userGrowthChart")
        .getContext("2d");

      const userGrowthChart = new Chart(ctxuser, {
        type: "line",
        data: {
          labels: months,
          datasets: [
            {
              label: "User Baru per Bulan",
              data: userGrowthData,
              fill: false,
              borderColor: "#4f46e5",
              backgroundColor: "#4f46e5",
              tension: 0.3,
              pointRadius: 4,
              pointHoverRadius: 6,
            },
          ],
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              display: false,
            },
            tooltip: {
              callbacks: {
                label: (context) => `${context.parsed.y} user baru`,
              },
            },
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                stepSize: 10,
              },
              title: {
                display: true,
                text: "Jumlah User Baru",
              },
            },
            x: {
              title: {
                display: true,
                text: "Bulan",
              },
            },
          },
        },
      });
    </script>
  </body>
</html>
